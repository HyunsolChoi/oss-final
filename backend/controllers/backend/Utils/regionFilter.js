/**
 * 사용자가 보낸 region 문자열을
 * ① 콤마(,) 로 쪼개고
 * ② ‘경기도’ → ‘경기’, ‘전북특별자치도’ → ‘전북’ 처럼 짧은 형태로 매핑
 * ③ 각 항목을 SQL Like 플레이스홀더용 “%패턴%” 으로 변환해 돌려준다
 */
const REGION_ALIAS = {
    '서울특별시': ['서울'],
    '서울':      ['서울'],

    '경기도':   ['경기'],
    '경기':     ['경기'],

    '인천광역시': ['인천'],
    '인천':       ['인천'],

    '강원특별자치도': ['강원'],
    '강원':           ['강원'],

    '충청북도': ['충북'],
    '충북':     ['충북'],

    '충청남도': ['충남'],
    '충남':     ['충남'],

    '대전광역시': ['대전'],
    '대전':       ['대전'],

    '세종특별자치시': ['세종'],
    '세종':           ['세종'],

    '전북특별자치도': ['전북'],
    '전라북도':       ['전북'],
    '전북':           ['전북'],

    '전라남도': ['전남'],
    '전남':     ['전남'],

    '광주광역시': ['광주'],
    '광주':       ['광주'],

    '경상북도': ['경북'],
    '경북':     ['경북'],
    '대구광역시': ['대구'],
    '대구':       ['대구'],

    '경상남도': ['경남'],
    '경남':     ['경남'],
    '부산광역시': ['부산'],
    '부산':       ['부산'],
    '울산광역시': ['울산'],
    '울산':       ['울산'],

    '제주특별자치도': ['제주'],
    '제주':           ['제주'],
};

function buildRegionLikePatterns(regionInput) {
    const parts = regionInput
        .split(',')
        .map(p => p.trim())
        .filter(Boolean);

    const tokens = new Set();
    parts.forEach(p => {
        (REGION_ALIAS[p] || [p]).forEach(a => tokens.add(a));
    });

    return Array.from(tokens).map(t => `%${t}%`);
}

module.exports = { buildRegionLikePatterns };